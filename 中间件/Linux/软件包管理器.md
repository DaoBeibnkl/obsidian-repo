## RPM
RPM（RedHat Package Manager）是由Red Hat公司开发的软件包管理器，用于在Linux系统上安装、升级、卸载和管理软件包。

1. 主要特点
	二进制文件格式：RPM包包含软件的二进制可执行文件，可以直接在系统中运行。
	依赖关系管理：RPM包声明了软件所依赖的其他软件包或库，确保系统上的依赖关系得到满足。
	标准化结构：每个RPM包都包含了一组严格定义的文件和目录结构，以确保软件正确地集成到系统中。

2. 基本组成
	二进制包：可以直接安装在计算机中，而无需编译。
	源代码包：提供了一些源代码，可能会由RPM自动编译、安装。
	Delta包：用于更新已安装的软件包，而不是完整的重新安装。

3. 工作原理
	元数据信息：RPM包通过一组脚本和元数据信息将软件包打包起来，这些元数据包括软件名称、版本、依赖关系等。
	依赖项检查：安装过程中，RPM包管理器会首先检查系统是否已经安装了所有必需的依赖项，如果依赖项不存在，则会自动下载并安装缺少的依赖项。
	脚本执行：RPM包管理器会按照指定的顺序执行一组脚本，包括预安装脚本、安装脚本、升级脚本和卸载脚本，以确保软件包被正确地安装到系统中。

4. 使用
* 安装软件包必须，加-i  \[ install]  

* 查询软件 
-a：使用选项-a或--all查询所有已安装的软件包。
-g：使用选项-g或--group查询有哪些软件包属于指定的类别，如Amusements/Games表示娱乐/游戏类。

-f：使用选项-f或--file查询有哪些软件包拥有指定文件。

-p：使用选项-p或--package查询指定RPM文件的信息。

-l：使用选项-l或--list查询软件包的文件列表。

-q：查询软件包信息

-c：显示软件包的配置文件列表

-d：显示软件包的文本文件列表


## yum和dnf
yum 和 dnf 都是 Red Hat 系列 Linux 发行版（如 CentOS、RHEL、Fedora）中核心的软件包管理工具，而 dnf 被设计为 yum 的现代化继任者。为了让你能快速把握全貌，我先通过一个表格来梳理它们的核心区别。

|特性对比|yum (Yellowdog Updater, Modified)|dnf (Dandified Yum)|
|---|---|---|
|​**​历史背景与定位​**​|诞生较早，是 ​**​RHEL/CentOS 7 及更早版本​**​的默认包管理器。|新一代工具，是 ​**​Fedora 22+, RHEL/CentOS 8+​**​ 的默认包管理器，旨在取代 yum。|
|​**​依赖解析引擎​**​|使用自有算法，处理复杂依赖时速度较慢，可能出现依赖冲突。|采用高性能的 ​**​`libsolv`​**​ 库（使用SAT算法），依赖解析​**​更快、更准确​**​。|
|​**​性能与资源占用​**​|相对较慢，内存占用较高。|​**​性能显著提升​**​，内存占用更低，并​**​支持并行下载​**​软件包。|
|​**​架构与扩展性​**​|架构相对陈旧，插件扩展性有限。|​**​模块化设计​**​，支持更现代、灵活的插件系统。|
|​**​依赖清理​**​|需明确使用 `autoremove`命令来清理无用依赖。|自动清理无用依赖的逻辑更智能。|

### 💻 如何使用它们

尽管底层架构不同，但 `dnf`在命令设计上​**​高度兼容​**​ `yum`的常用语法。这意味着你熟悉的绝大多数 `yum`命令都可以直接在 `dnf`中使用，迁移学习成本很低。

下表列出了最常见的操作命令对比，你可以发现它们几乎一致：

search和list注意区别！一个远程仓库，一个本地系统。
搜索已经安装的可以用dnf或者直接rpm 的-q

| 操作              | yum 命令                       | dnf 命令                       |
| --------------- | ---------------------------- | ---------------------------- |
| ​**​安装软件包​**​   | `yum install <package_name>` | `dnf install <package_name>` |
| ​**​更新所有软件包​**​ | `yum update`                 | `dnf update`                 |
| ​**​更新指定软件包​**​ | `yum update <package_name>`  | `dnf update <package_name>`  |
| ​**​删除软件包​**​   | `yum remove <package_name>`  | `dnf remove <package_name>`  |
| ​**​搜索软件包​**​   | `yum search <keyword>`       | `dnf search <keyword>`       |
| ​**​列出已安装包​**​  | `yum list installed`         | `dnf list installed`         |
| ​**​获取包信息​**​   | `yum info <package_name>`    | `dnf info <package_name>`    |
| ​**​清理缓存​**​    | `yum clean all`              | `dnf clean all`              |

除了基本操作，`dnf`还提供了一些增强功能，例如更强大的历史记录管理，允许你回滚到之前的操作状态：`dnf history rollback <事务ID>`。

### 🔍 如何选择与注意事项

- ​**​根据系统版本选择​**​：这其实是最简单的判断标准。如果你使用的是 ​**​RHEL/CentOS 8 或更新版本​**​，或者现代的 ​**​Fedora​**​ 系统，那么系统默认的包管理工具就是 `dnf`。在这些系统上，即使你输入 `yum`命令，实际调用的也是 `dnf`（一个为了兼容性而创建的软链接），但官方推荐直接使用 `dnf`命令以获得最佳体验。如果你正在维护 ​**​RHEL/CentOS 7 等旧版本系统​**​，那么你需要使用 `yum`。虽然可以手动安装 `dnf`，但可能面临依赖冲突，非必要不建议这么做。
    
- ​**​注意事项​**​：
    
    - ​**​权限​**​：绝大多数包管理操作都需要 `root`权限，记得在命令前加上 `sudo`。
        
    - ​**​网络​**​：确保你的网络连接正常，因为安装软件需要从远程仓库下载数据。
        
    - ​**​配置国内源​**​：如果你在中国大陆，为了提高下载速度，建议将默认软件源替换为国内镜像源（如阿里云、清华源等）。具体操作方法可以搜索相应镜像站的帮助文档。
        
    

希望这份详细的对比和介绍能帮助你更清晰地理解和使用 yum 和 dnf。


## yum和yum源


* 定义

	Yum 源（Yellowdog Updater Modified repository）是在基于 Red Hat 系列操作系统（如 CentOS、RHEL）中用于软件安装、更新和管理的软件仓库源。它包含了大量的软件包以及这些软件包的相关信息，如软件名称、版本、依赖关系、文件列表等。
	

组成部分
* 软件包文件：
	这是 yum 源的核心内容，包含了各种可以安装到系统中的软件包。这些软件包以 RPM（Red Hat Package Manager）格式存储，RPM 包本身是一种已经编译好的软件包，包含了软件的二进制文件、配置文件、文档等内容。例如，常见的服务器软件如 httpd（Apache HTTP 服务器）、MySQL 数据库等，它们的 RPM 包都会存放在 yum 源中。

* 元数据文件：
	用于描述软件包的信息，主要包括以下几类：
	软件包清单（package list）：记录了 yum 源中所有软件包的名称、版本号、发布版本等基本信息。通过这些信息，yum 工具可以快速查询到某个软件是否在仓库中有可用版本。
	依赖关系（dependency）：详细说明了每个软件包安装所需要依赖的其他软件包。例如，安装 MySQL 可能需要依赖libaio库和perl - DBI等软件包，这些依赖关系信息在元数据中会明确记录。当使用 yum 安装软件时，它会根据这些依赖关系自动安装所需的软件包。
	软件包位置（repository location）：告知 yum 工具软件包在仓库中的具体存储位置，以便能够正确地下载和安装软件包。


* 工作原理
	本地缓存与远程仓库交互：
	当第一次使用 yum 命令（如yum install <package - name>）时，系统会从远程 yum 源服务器下载软件包的元数据并缓存到本地。之后，在进行软件安装、更新或查询操作时，yum 首先会检查本地缓存的元数据，以确定软件包的可用性和相关信息。如果本地缓存的元数据过期或者需要获取最新的软件包版本信息，yum 会自动从远程 yum 源服务器更新缓存。
	软件包安装和更新过程：
	当用户执行软件包安装命令时，例如yum install httpd，yum 会根据本地缓存的元数据检查软件包的依赖关系。它会先确定需要安装的所有软件包（包括主软件包和其依赖的软件包），然后从远程 yum 源服务器下载这些软件包到本地缓存目录，最后按照正确的顺序安装这些软件包到系统中。在更新软件包时，过程类似，yum 会比较本地已安装软件包的版本和远程 yum 源中软件包的最新版本，然后进行更新操作。
	
yum 源的分类:
	官方 yum 源：
	由操作系统发行商提供，如 CentOS 官方 yum 源。它包含了经过操作系统发行商测试和认证的软件包，这些软件包与操作系统的兼容性有很好的保证，适合用于系统的基础软件安装和更新，如系统工具、服务器软件等。
	第三方 yum 源：(EPEL,Mysql)
	除了官方 yum 源外，还有许多第三方组织或厂商提供的 yum 源。例如，EPEL（Extra Packages for Enterprise Linux）是一个很受欢迎的第三方 yum 源，它提供了许多官方 yum 源没有包含的软件包，如一些开源的开发工具、图形软件等。另外，软件厂商也会提供自己的 yum 源，如 MySQL 官方 yum 源，用于安装和更新其特定的软件产品。这些第三方 yum 源可以扩展系统的软件安装范围，满足用户更多样化的需求。
